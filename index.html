<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cultivation of Mind</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="antialiased">

    <video id="video-background" autoplay loop muted playsinline><source src="bg.webm" type="video/webm"></video>

    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300">
        <div class="loader"></div>
    </div>

    <div class="container mx-auto p-4 md:p-6 lg:p-8 max-w-7xl relative">
        <header class="text-center mb-6 max-w-4xl mx-auto">
            <h1 class="font-display text-4xl md:text-5xl lg:text-6xl font-bold text-white tracking-wider leading-tight" style="text-shadow: 0 0 15px var(--theme-yellow-glow);">"Cultivation of mind should be the ultimate aim of human existence."</h1>
        </header>

        <div class="flex justify-center mb-8">
            <button id="analytics-btn" class="ds-button py-2 px-5 rounded-md"><i class="fas fa-chart-line mr-2"></i>Analytics</button>
        </div>

        <!-- Main View -->
        <main id="main-view">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1 space-y-8">
                    <div class="ds-card p-6">
                        <h2 class="font-display text-3xl font-semibold text-white mb-4 tracking-wider">Add New Item</h2>
                        <form id="add-item-form" class="space-y-4">
                            <textarea id="item-question" required class="ds-input w-full rounded-md p-3 transition" rows="3" placeholder="Concept (Markdown supported)..."></textarea>
                            <input type="url" id="item-link" class="ds-input w-full rounded-md p-3 transition" placeholder="Reference link (optional)...">
                            <input type="text" id="item-topic" list="topics-list" class="ds-input w-full rounded-md p-3 transition" placeholder="Topic (e.g., Array)">
                            <div>
                                <label for="schedule-type" class="block text-sm font-medium text-slate-400 mb-2">Schedule Type</label>
                                <select id="schedule-type" class="ds-select w-full rounded-md p-3">
                                    <option value="smart">Smart Scheduling (Recommended)</option>
                                    <option value="fixed">Fixed Intervals</option>
                                </select>
                            </div>
                            <div id="fixed-schedule-container" class="hidden">
                                <label for="fixed-intervals" class="block text-sm font-medium text-slate-400 mb-2">Intervals (days from creation)</label>
                                <input type="text" id="fixed-intervals" value="3, 7, 15, 30, 60" class="ds-input w-full rounded-md p-3 transition">
                            </div>
                            <button type="submit" id="add-item-btn" class="ds-button w-full py-3 px-4 rounded-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                                <span class="btn-text"><i class="fas fa-bolt mr-2"></i>Add Item</span>
                                <span class="btn-loader hidden"></span>
                            </button>
                        </form>
                    </div>

                    <div class="ds-card p-6">
                        <div class="flex items-center justify-between mb-4">
                            <button id="prev-month" aria-label="Previous month" class="p-2 rounded-full hover:bg-white/10 transition"><i class="fas fa-chevron-left"></i></button>
                            <h2 id="calendar-header" class="font-display text-2xl font-semibold text-white tracking-wider"></h2>
                            <button id="next-month" aria-label="Next month" class="p-2 rounded-full hover:bg-white/10 transition"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <div class="grid grid-cols-7 text-center font-display tracking-wider text-slate-400 text-sm mb-2">
                            <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>
                        </div>
                        <div id="calendar-body" class="grid grid-cols-7 gap-1 place-items-center"></div>
                    </div>

                    <div class="ds-card p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="font-display text-3xl font-semibold text-white tracking-wider">Today's Revisions (<span id="today-count">0</span>)</h2>
                        </div>
                        <div id="today-revisions-list" class="space-y-3 max-h-60 overflow-y-auto pr-2"></div>
                    </div>
                </div>

                <div class="lg:col-span-2 space-y-8">
                     <div class="ds-card p-6">
                        <div class="flex flex-wrap items-center justify-between mb-4 gap-4">
                            <h2 class="font-display text-3xl font-semibold text-white tracking-wider">Full Revisit Tracker</h2>
                             <div class="flex items-center gap-4">
                                <div id="topic-filter-container"></div>
                                <button id="cram-btn" class="ds-button py-2 px-4 rounded-md text-sm"><i class="fas fa-brain mr-2"></i>Cram</button>
                            </div>
                        </div>
                        <div id="all-items-list" class="space-y-3 max-h-[46rem] overflow-y-auto pr-2"></div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Analytics View -->
        <div id="analytics-view" class="hidden">
             <div class="mb-6">
                 <button id="back-to-main-btn" class="text-slate-300 hover:text-[var(--theme-yellow)] transition-colors duration-200 text-lg flex items-center">
                    <i class="fas fa-arrow-left mr-3"></i><span class="font-display text-4xl tracking-wider">Analytics</span>
                 </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="ds-card p-6 flex items-center space-x-4"><i class="fas fa-fire-alt text-4xl text-[var(--theme-yellow)]"></i><div><p class="text-slate-400 text-lg">Current Streak</p><p id="stats-current-streak" class="text-3xl font-bold">0</p></div></div>
                <div class="ds-card p-6 flex items-center space-x-4"><i class="fas fa-trophy text-4xl text-[var(--theme-yellow)]"></i><div><p class="text-slate-400 text-lg">Longest Streak</p><p id="stats-longest-streak" class="text-3xl font-bold">0</p></div></div>
                <div class="ds-card p-6 flex items-center space-x-4"><i class="fas fa-check-double text-4xl text-[var(--theme-yellow)]"></i><div><p class="text-slate-400 text-lg">Items Mastered</p><p id="stats-items-mastered" class="text-3xl font-bold">0</p></div></div>
            </div>
            <div class="ds-card p-6 mb-8">
                <h3 class="font-display text-3xl text-white tracking-wider mb-4">Revision Heatmap</h3>
                <div id="heatmap-calendar" class="space-y-4"></div>
            </div>
             <div class="ds-card p-6">
                <h3 class="font-display text-3xl text-white tracking-wider mb-4">Achievements</h3>
                <div id="achievements-list" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 text-center"></div>
            </div>
        </div>
    </div>

    <img src="zenitsu-demon-slayer..._imresizer.png" alt="Character Art" id="character-art">

    <div id="modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div id="modal-content" class="modal-content ds-card p-8 rounded-lg w-full max-w-lg mx-auto transform scale-95 opacity-0">
            <h3 id="modal-title" class="font-display text-3xl font-bold text-white mb-4">Confirm Action</h3>
            <div id="modal-body" class="text-slate-300 mb-6 max-h-[60vh] overflow-y-auto"></div>
            <div id="modal-footer" class="flex justify-end space-x-4 mt-6">
                <button id="modal-cancel-btn" class="ds-button py-2 px-4 rounded-md">Cancel</button>
                <button id="modal-confirm-btn" class="ds-button py-2 px-4 rounded-md">Confirm</button>
            </div>
        </div>
    </div>
    
    <div id="toast-container"></div>
    
    <datalist id="topics-list">
        <option value="Array"></option><option value="Linked List"></option><option value="Hash Table"></option>
        <option value="Stack"></option><option value="Queue"></option><option value="Tree"></option>
        <option value="Graph"></option><option value="Heap"></option><option value="Trie"></option>
        <option value="Sorting"></option><option value="Searching"></option><option value="Recursion"></option>
        <option value="Dynamic Programming"></option><option value="Bit Manipulation"></option>
    </datalist>

    <script type="module" src="script.js"></script>
</body>
</html>
